<script setup lang="ts">
defineOptions({ name: 'ProfileIndex' });
import PasswordChange from '@/components/profile/PasswordChange.vue';
import { useAuthStore } from '@/stores/auth.store.ts';
import type { AuthStore } from '@/stores/auth.store.ts';
import { useUserQuery } from '@/queries/useUserQuery';

const authStore: AuthStore = useAuthStore();
const { data: user, isLoading } = useUserQuery();

watch(user, (value) => {
  if (value) {
    authStore.setUser(value);
    authStore.setToken(value.token);
  }
});
</script>

<template>
  <div>
    <h1>游녻 캟칙y l trang c치 nh칙n</h1>

    ===================
    <p v-if="isLoading">캟ang t故믈 th칪ng tin ng퀋敲렬 d칯ng...</p>
    <p v-else-if="user">Xin ch맖 {{ user.email }}</p>
    <p v-else>Kh칪ng c칩 th칪ng tin ng퀋敲렬 d칯ng.</p>
    ===================

    <PasswordChange />
  </div>
</template>

<style scoped></style>
